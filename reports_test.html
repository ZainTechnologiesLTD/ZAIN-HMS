<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports Page Test</title>
    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Reports & Analytics</h1>
                </div>

                <!-- Reports Alpine.js Component Test -->
                <div x-data="reportsManager()" class="mb-4">
                    <h3>Reports Manager Test</h3>
                    <p x-text="message"></p>
                    <button @click="refreshData" class="btn btn-primary">Refresh Reports</button>
                </div>

                <!-- Financial Dashboard Section -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h3>Financial Dashboard</h3>
                    </div>
                    <!-- Summary Cards -->
                    <div class="col-md-3 mb-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h5 class="card-title">Total Revenue</h5>
                                <h2 id="total-revenue" class="text-success">Loading...</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h5 class="card-title">Average Daily</h5>
                                <h2 id="average-daily" class="text-info">Loading...</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="card text-center">
                            <div class="card-body">
                                <h5 class="card-title">Pending Bills</h5>
                                <h2 id="pending-bills" class="text-warning">Loading...</h2>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Revenue Chart</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="revenueChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- No Data Message -->
                <div id="no-data-message" class="alert alert-info" style="display: none;">
                    <h4>No Financial Data Available</h4>
                    <p>There are no financial records to display at this time.</p>
                </div>
            </main>
        </div>
    </div>

    <!-- Load the JavaScript files -->
    <script src="/static/js/dashboard/unified_dashboard.js"></script>
    <!-- Only load financial_dashboard.js if we have the full financial page elements -->
    <!-- <script src="/static/js/reports/financial_dashboard.js"></script> -->
    
    <script>
        // Test functions for debugging
        function showNoDataMessage() {
            const noDataEl = document.getElementById('no-data-message');
            if (noDataEl) noDataEl.style.display = 'block';
        }
        
        function hideNoDataMessage() {
            const noDataEl = document.getElementById('no-data-message');
            if (noDataEl) noDataEl.style.display = 'none';
        }
        
        console.log('Reports test page loaded');
    </script>
</body>
</html>