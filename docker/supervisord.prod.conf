# üè• ZAIN HMS Production Supervisor Configuration
# Manages Django application process

[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/app/logs

[program:gunicorn]
command=gunicorn --bind 0.0.0.0:8000 --workers 4 --worker-class gthread --threads 2 --worker-connections 1000 --max-requests 1000 --max-requests-jitter 100 --preload --access-logfile /app/logs/gunicorn-access.log --error-logfile /app/logs/gunicorn-error.log --log-level info zain_hms.wsgi:application
directory=/app
user=zain
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/app/logs/gunicorn.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile=/app/logs/gunicorn-error.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5

[program:celery]
command=celery -A zain_hms worker --loglevel=info --concurrency=2
directory=/app
user=zain
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/app/logs/celery.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile=/app/logs/celery-error.log
stderr_logfile_maxbytes=50MB
stderr_logfile_backups=5

[program:celery-beat]
command=celery -A zain_hms beat --loglevel=info --schedule=/app/celerybeat-schedule
directory=/app
user=zain
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/app/logs/celery-beat.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5