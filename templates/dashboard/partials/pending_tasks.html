{% load humanize %}
<!-- Pending Tasks Partial Template for HTMX Updates (Alpine-free) -->
<div class="card-body pt-2">
    <div class="list-group list-group-flush">
        {% if pending_bills %}
            {% for bill in pending_bills %}
            <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                <div>
                    <i class="bi bi-receipt text-warning me-2"></i>
                    <strong>{{ bill.patient.get_full_name }}</strong> - ${{ bill.total_amount|floatformat:2 }}
                    <small class="d-block text-muted">{{ bill.created_at|naturaltime }}</small>
                </div>
                <span class="badge bg-warning rounded-pill">Pending</span>
            </div>
            {% endfor %}
        {% endif %}

        {% if pending_appointments %}
            {% for appointment in pending_appointments %}
            <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                <div>
                    <i class="bi bi-calendar-check text-info me-2"></i>
                    <strong>{{ appointment.patient.get_full_name }}</strong>
                    <small class="d-block text-muted">
                        Dr. {{ appointment.doctor.get_full_name }} â€¢ {{ appointment.appointment_date|date:"M d, Y" }}
                    </small>
                </div>
                <span class="badge bg-info rounded-pill">Pending</span>
            </div>
            {% endfor %}
        {% endif %}

        <!-- Default tasks if no dynamic tasks -->
        {% if not pending_bills and not pending_appointments %}
        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <div><i class="bi bi-person-check text-success me-2"></i>Staff Approvals</div>
            <span class="badge bg-success rounded-pill">2</span>
        </a>
        <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <div><i class="bi bi-clipboard-check text-primary me-2"></i>System Updates</div>
            <span class="badge bg-primary rounded-pill">1</span>
        </a>
        {% endif %}
    </div>
</div>
